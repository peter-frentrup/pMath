/* pMath Document */

Document({SectionGroup({Section("ToggleSwitch \[LongDash] Test", "Title"), 
    SectionGroup({
      Section(BoxData({"Slider", "(", {{"Dynamic", "(", "x", ")"}, ",", {
           "Appearance", "\[Rule]", ComplexStringBox(
            "\"ToggleSwitchUnchecked\"")}}, ")"}), "Input", 
       SectionLabel -> "in [1]:"), 
      Section(BoxData(SliderBox(Dynamic(Global`x), 0 .. 1, 
         Appearance -> "ToggleSwitchUnchecked")), "Output", 
       SectionGenerated -> True, SectionLabel -> "out [1]:")}, All), 
    SectionGroup({
      Section(BoxData({"Slider", "(", {{"Dynamic", "(", "x", ")"}, ",", {
           "Appearance", "\[Rule]", ComplexStringBox(
            "\"ToggleSwitchChecked\"")}}, ")"}), "Input", 
       SectionLabel -> "in [2]:"), 
      Section(BoxData(SliderBox(Dynamic(Global`x), 0 .. 1, 
         Appearance -> "ToggleSwitchChecked")), "Output", 
       SectionGenerated -> True, SectionLabel -> "out [2]:")}, All), 
    SectionGroup({
      Section(
       BoxData({{"TemplateBox", "(", {{"{", {"Dynamic", "(", "c", ")"}, "}"}, 
           ",", ComplexStringBox("\"ToggleSwitch\""), ",", {
            "DisplayFunction", "\[Rule]", {
             "Function", "(", {"SliderBox", "(", {
               {"Dynamic", "(", {
                 {"\n", {{"CurrentValue", "(", {
                     "{", {"TemplateSlot", ",", "1"}, "}"}, ")"}, ".", 
                   "Replace", "(", {"{", {{"True", "\[Rule]", "1"}, ",", {
                      "False", "\[Rule]", "0"}, ",", {"~", "\[Rule]", "0.5"}}, 
                    "}"}, ")"}}, ",", {
                  "{", {"None", ",", "Temporary", ",", {
                    "Function", "(", {
                     "\n", {
                      {{"If", "(", {{"(", {"0", "<", "#", "<", "1"}, ")"}, 
                         "===", "True"}, ")"}, {
                        "{", {
                         "\n", {
                          {{"With", "(", {"FE`Private`state", "\[Assign]", {
                              "CurrentValue", "(", {
                               "{", {"TemplateSlot", ",", "1"}, "}"}, ")"}}, 
                            ")"}, {
                            "{", {
                             "\n", {
                              {{"If", "(", {
                                 {"FE`Private`state", "===", "True"}, "||", {
                                  "FE`Private`state", "===", "False"}}, ")"}, {
                                "{", {
                                 "\n", {
                                  {{"CurrentValue", "(", {
                                     "{", {"TemplateSlot", ",", "1"}, "}"}, 
                                    ")"}, "\[Assign]", {
                                    "Not", "(", "FE`Private`state", ")"}}, 
                                  "\n"}}, "}"}, "Else", {
                                "{", {
                                 "\n", {
                                  {{"CurrentValue", "(", {
                                     "{", {"TemplateSlot", ",", "1"}, "}"}, 
                                    ")"}, "\[Assign]", {
                                    {"(", {{"#", "1"}, "\[GreaterEqual]", 
                                      "0.5"}, ")"}, "===", "True"}}, ";", 
                                  "\n"}}, "}"}}, "\n"}}, "}"}}, "\n"}}, "}"}, 
                       "Else", {
                        "{", {
                         "\n", {
                          {{"CurrentValue", "(", {
                             "{", {"TemplateSlot", ",", "1"}, "}"}, ")"}, 
                           "\[Assign]", {{"(", {"#", "=", "1"}, ")"}, "===", 
                            "True"}}, "\n"}}, "}"}}, "\n"}}, ")"}}, "}"}}, 
                ")"}, ",", {"0", "..", "1"}, ",", {
                "ContinuousAction", "\[Rule]", "False"}, ",", {
                "Appearance", "\[Rule]", {
                 "Dynamic", "(", {
                  {"CurrentValue", "(", {"{", {"TemplateSlot", ",", "1"}, 
                    "}"}, ")"}, ".", "Replace", "(", {
                   "{", {
                    {"True", "\[Rule]", ComplexStringBox(
                      "\"ToggleSwitchChecked\"")}, ",", {
                     "~", "\[Rule]", ComplexStringBox(
                      "\"ToggleSwitchUnchecked\"")}}, "}"}, ")"}, ")"}}}, 
              ")"}, ")"}}}, ")"}, ".", "RawBoxes"}), "Input", 
       SectionLabel -> "in [17]:"), 
      Section(BoxData(TemplateBox({Dynamic(Global`c)}, "ToggleSwitch", 
         DisplayFunction -> (SliderBox(
          Dynamic(Replace(CurrentValue({TemplateSlot, 1}), {
             True -> 1, False -> 0, ~ -> 0.5`}), {
            None, Temporary, If((0 < #1 < 1) === True, 
             With({FE`Private`state:= CurrentValue({TemplateSlot, 1})}, 
              If(FE`Private`state === True || FE`Private`state === False, 
               CurrentValue({TemplateSlot, 1}):= !FE`Private`state, 
               CurrentValue({TemplateSlot, 1}):= (#1 >= 0.5`) === True;)), 
             CurrentValue({TemplateSlot, 1}):= (#1 = 1) === True) &}), 0 .. 1, 
          ContinuousAction -> False, Appearance -> Dynamic(
           Replace(CurrentValue({TemplateSlot, 1}), {
             True -> "ToggleSwitchChecked", 
             ~ -> "ToggleSwitchUnchecked"}))) &))), "Output", 
       SectionGenerated -> True, SectionLabel -> "out [17]:")}, All), 
    SectionGroup({Section(BoxData({"Dynamic", "(", "c", ")"}), "Input", 
       SectionLabel -> "in [4]:"), 
      Section(BoxData(DynamicBox(ToBoxes(Global`c))), "Output", 
       SectionGenerated -> True, SectionLabel -> "out [4]:")}, All), 
    SectionGroup({
      Section(BoxData({"Checkbox", "(", {"Dynamic", "(", "c", ")"}, ")"}), 
       "Input", SectionLabel -> "in [5]:"), 
      Section(BoxData(CheckboxBox(Dynamic(Global`c))), "Output", 
       SectionGenerated -> True, SectionLabel -> "out [5]:")}, All), 
    Section(BoxData({"c", "\[Assign]", "."}), "Input", 
     SectionLabel -> "in [10]:")}, All)}, 
 StyleDefinitions -> "Default.pmathdoc", Visible -> True)