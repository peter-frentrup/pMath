\hypertarget{group__file__api}{
\subsection{File API}
\label{group__file__api}\index{File API@{File API}}
}
Unified API to access file or other memory content.  


\subsubsection*{Data Structures}
\begin{CompactItemize}
\item 
class \hyperlink{structpmath__binary__file__api__t}{pmath\_\-binary\_\-file\_\-api\_\-t}
\begin{CompactList}\small\item\em Access functions for binary files. \item\end{CompactList}\item 
class \hyperlink{structpmath__text__file__api__t}{pmath\_\-text\_\-file\_\-api\_\-t}
\begin{CompactList}\small\item\em Access functions for text files. \item\end{CompactList}\end{CompactItemize}
\subsubsection*{Enumerations}
\begin{CompactItemize}
\item 
enum \hyperlink{group__file__api_g1fa07caf59a04495b7c74be6aff3a3d9}{pmath\_\-files\_\-status\_\-t} \{ \par
\hyperlink{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d9bacfd61bc852b4be54280715375f36c0}{PMATH\_\-FILE\_\-OK} =  0, 
\hyperlink{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93c23923ffa72af933ad29272b9baedc6}{PMATH\_\-FILE\_\-INVALID} =  1, 
\par
\hyperlink{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d964498ce552430289369bbfc0c05e7721}{PMATH\_\-FILE\_\-ENDOFFILE} =  2, 
\hyperlink{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d91b71851e549f8ecdd0f1e338d24fff43}{PMATH\_\-FILE\_\-OTHERERROR} =  3, 
\par
\hyperlink{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93df4d4f5a846c3a5e3ecdda899945e0c}{PMATH\_\-FILE\_\-RECURSIVE} =  4
 \}
\begin{CompactList}\small\item\em The status of a file. \item\end{CompactList}\end{CompactItemize}
\subsubsection*{Functions}
\begin{CompactItemize}
\item 
PMATH\_\-API \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} \hyperlink{group__file__api_gacadb911c98d75248cbcf4fbe5a3237a}{pmath\_\-file\_\-test} (\hyperlink{classpmath__t}{pmath\_\-t} file, int properties)
\begin{CompactList}\small\item\em Check whether a file supports a set of properties. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__file__api_g1fa07caf59a04495b7c74be6aff3a3d9}{pmath\_\-files\_\-status\_\-t} \hyperlink{group__file__api_gc3e849245672e6b61ee1a447218d5ea5}{pmath\_\-file\_\-status} (\hyperlink{classpmath__t}{pmath\_\-t} file)
\begin{CompactList}\small\item\em Get the current status of a readable file. \item\end{CompactList}\item 
PMATH\_\-API size\_\-t \hyperlink{group__file__api_g045e5eeb1b78c481c5479fc52ba3a402}{pmath\_\-file\_\-read} (\hyperlink{classpmath__t}{pmath\_\-t} file, void $\ast$buffer, size\_\-t buffer\_\-size, \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} preserve\_\-internal\_\-buffer)
\begin{CompactList}\small\item\em Read some bytes from a binary file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{classpmath__string__t}{pmath\_\-string\_\-t} \hyperlink{group__file__api_gfe0826b3bb3e06907074976c57a67dbf}{pmath\_\-file\_\-readline} (\hyperlink{classpmath__t}{pmath\_\-t} file)
\begin{CompactList}\small\item\em Read one line from a text file. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__file__api_g84c177ddfd1eeaa2b8b5fd5aafbf16a1}{pmath\_\-file\_\-set\_\-textbuffer} (\hyperlink{classpmath__t}{pmath\_\-t} file, \hyperlink{classpmath__string__t}{pmath\_\-string\_\-t} buffer)
\begin{CompactList}\small\item\em Set a file's text buffer. \item\end{CompactList}\item 
PMATH\_\-API size\_\-t \hyperlink{group__file__api_g085f074227d8d7ed82c0fba82fa43109}{pmath\_\-file\_\-write} (\hyperlink{classpmath__t}{pmath\_\-t} file, const void $\ast$buffer, size\_\-t buffer\_\-size)
\begin{CompactList}\small\item\em Write some bytes to a binary file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} \hyperlink{group__file__api_g09096caebfcdfeb74c8f3845ff2ff262}{pmath\_\-file\_\-writetext} (\hyperlink{classpmath__t}{pmath\_\-t} file, const uint16\_\-t $\ast$str, int len)
\begin{CompactList}\small\item\em Write to a text file. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__file__api_g039eb11d9dd85af6699565c6f0f0daa1}{pmath\_\-file\_\-flush} (\hyperlink{classpmath__t}{pmath\_\-t} file)
\begin{CompactList}\small\item\em Flush the output buffer of a writeable file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} \hyperlink{group__file__api_gf6b8233107d3fb27e9fdabfacc8595d1}{pmath\_\-file\_\-write\_\-object} (\hyperlink{classpmath__t}{pmath\_\-t} file, \hyperlink{classpmath__t}{pmath\_\-t} obj, \hyperlink{group__objects_gd83ea6a616c49cbe35b5d3dafb877f7e}{pmath\_\-write\_\-options\_\-t} options)
\begin{CompactList}\small\item\em Write an object to a text file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} \hyperlink{group__file__api_g7f852f3c8057a535541fbf64f75940d2}{pmath\_\-file\_\-set\_\-binbuffer} (\hyperlink{classpmath__t}{pmath\_\-t} file, size\_\-t size)
\begin{CompactList}\small\item\em Set a binary file's buffer size. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__file__api_ga286dc02f8ee28ee0b3fcfa302ae7982}{pmath\_\-file\_\-manipulate} (\hyperlink{classpmath__t}{pmath\_\-t} file, void($\ast$type)(void $\ast$), void($\ast$callback)(void $\ast$, void $\ast$), void $\ast$data)
\begin{CompactList}\small\item\em Manipulate a file's internal representation. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__general__types_gc92090cb0b56345d6c379ed2341d4ef4}{pmath\_\-bool\_\-t} \hyperlink{group__file__api_g61142920bd7a8f066af908092c84d8e4}{pmath\_\-file\_\-close} (\hyperlink{classpmath__t}{pmath\_\-t} file)
\begin{CompactList}\small\item\em Closes a file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{classpmath__symbol__t}{pmath\_\-symbol\_\-t} \hyperlink{group__file__api_g121e1c31d32fa30b60c8bb4d0808f4eb}{pmath\_\-file\_\-create\_\-binary} (void $\ast$extra, void($\ast$extra\_\-destructor)(void $\ast$), \hyperlink{structpmath__binary__file__api__t}{pmath\_\-binary\_\-file\_\-api\_\-t} $\ast$api)
\begin{CompactList}\small\item\em Create a binary file object. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{classpmath__symbol__t}{pmath\_\-symbol\_\-t} \hyperlink{group__file__api_gb8a4394b083543a3e572862d567b4b63}{pmath\_\-file\_\-create\_\-text} (void $\ast$extra, void($\ast$extra\_\-destructor)(void $\ast$), \hyperlink{structpmath__text__file__api__t}{pmath\_\-text\_\-file\_\-api\_\-t} $\ast$api)
\begin{CompactList}\small\item\em Create a text file object. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{classpmath__symbol__t}{pmath\_\-symbol\_\-t} \hyperlink{group__file__api_gc6f1960c7c529c1dac9feb97cf795a1c}{pmath\_\-file\_\-create\_\-text\_\-from\_\-binary} (\hyperlink{classpmath__t}{pmath\_\-t} binfile, const char $\ast$encoding)
\begin{CompactList}\small\item\em Create a text file object operating on a binary file. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{classpmath__symbol__t}{pmath\_\-symbol\_\-t} \hyperlink{group__file__api_g811d829fe964ebbe554c645a0f0f519d}{pmath\_\-file\_\-create\_\-binary\_\-buffer} (size\_\-t mincapacity)
\begin{CompactList}\small\item\em Create a byte-stream file object. \item\end{CompactList}\item 
PMATH\_\-API size\_\-t \hyperlink{group__file__api_gaa064ada946d36bf41ed9908d8176360}{pmath\_\-file\_\-binary\_\-buffer\_\-size} (\hyperlink{classpmath__t}{pmath\_\-t} binfile)
\begin{CompactList}\small\item\em Get The number of readable bytes in a binary buffer. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__file__api_g9c684b801f150b0485c850cf3649cb16}{pmath\_\-file\_\-binary\_\-buffer\_\-manipulate} (\hyperlink{classpmath__t}{pmath\_\-t} binfile, void($\ast$callback)(uint8\_\-t $\ast$readable, uint8\_\-t $\ast$writable, const uint8\_\-t $\ast$end, void $\ast$closure), void $\ast$closure)
\begin{CompactList}\small\item\em Manipulate the content of a binary buffer. \item\end{CompactList}\end{CompactItemize}


\subsubsection{Detailed Description}
Unified API to access file or other memory content. 

\hyperlink{class_a}{A} file is a \hyperlink{group__symbols}{Symbol} (normally with attribute \hyperlink{group__symbols_g5d508ec0d32d617b6c642de54907ee17}{PMATH\_\-SYMBOL\_\-ATTRIBUTE\_\-TEMPORARY}) whose value is a special \hyperlink{group__custom}{Custom Object}.

The output functions can operate on lists of files. 

\subsubsection{Enumeration Type Documentation}
\hypertarget{group__file__api_g1fa07caf59a04495b7c74be6aff3a3d9}{
\index{file\_\-api@{file\_\-api}!pmath\_\-files\_\-status\_\-t@{pmath\_\-files\_\-status\_\-t}}
\index{pmath\_\-files\_\-status\_\-t@{pmath\_\-files\_\-status\_\-t}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-files\_\-status\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf pmath\_\-files\_\-status\_\-t}}\hfill}
\label{group__file__api_g1fa07caf59a04495b7c74be6aff3a3d9}


The status of a file. 

\begin{Desc}
\item[See also:]\hyperlink{group__file__api_gc3e849245672e6b61ee1a447218d5ea5}{pmath\_\-file\_\-status()} \end{Desc}
\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{PMATH\_\-FILE\_\-OK@{PMATH\_\-FILE\_\-OK}!file\_\-api@{file\_\-api}}\index{file\_\-api@{file\_\-api}!PMATH\_\-FILE\_\-OK@{PMATH\_\-FILE\_\-OK}}\item[{\em 
\hypertarget{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d9bacfd61bc852b4be54280715375f36c0}{
PMATH\_\-FILE\_\-OK}
\label{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d9bacfd61bc852b4be54280715375f36c0}
}]No error. \index{PMATH\_\-FILE\_\-INVALID@{PMATH\_\-FILE\_\-INVALID}!file\_\-api@{file\_\-api}}\index{file\_\-api@{file\_\-api}!PMATH\_\-FILE\_\-INVALID@{PMATH\_\-FILE\_\-INVALID}}\item[{\em 
\hypertarget{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93c23923ffa72af933ad29272b9baedc6}{
PMATH\_\-FILE\_\-INVALID}
\label{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93c23923ffa72af933ad29272b9baedc6}
}]The object is no readable file. \index{PMATH\_\-FILE\_\-ENDOFFILE@{PMATH\_\-FILE\_\-ENDOFFILE}!file\_\-api@{file\_\-api}}\index{file\_\-api@{file\_\-api}!PMATH\_\-FILE\_\-ENDOFFILE@{PMATH\_\-FILE\_\-ENDOFFILE}}\item[{\em 
\hypertarget{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d964498ce552430289369bbfc0c05e7721}{
PMATH\_\-FILE\_\-ENDOFFILE}
\label{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d964498ce552430289369bbfc0c05e7721}
}]The (readable) file position is at the end. \index{PMATH\_\-FILE\_\-OTHERERROR@{PMATH\_\-FILE\_\-OTHERERROR}!file\_\-api@{file\_\-api}}\index{file\_\-api@{file\_\-api}!PMATH\_\-FILE\_\-OTHERERROR@{PMATH\_\-FILE\_\-OTHERERROR}}\item[{\em 
\hypertarget{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d91b71851e549f8ecdd0f1e338d24fff43}{
PMATH\_\-FILE\_\-OTHERERROR}
\label{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d91b71851e549f8ecdd0f1e338d24fff43}
}]There is another problem with the file. \index{PMATH\_\-FILE\_\-RECURSIVE@{PMATH\_\-FILE\_\-RECURSIVE}!file\_\-api@{file\_\-api}}\index{file\_\-api@{file\_\-api}!PMATH\_\-FILE\_\-RECURSIVE@{PMATH\_\-FILE\_\-RECURSIVE}}\item[{\em 
\hypertarget{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93df4d4f5a846c3a5e3ecdda899945e0c}{
PMATH\_\-FILE\_\-RECURSIVE}
\label{group__file__api_gg1fa07caf59a04495b7c74be6aff3a3d93df4d4f5a846c3a5e3ecdda899945e0c}
}]The file is already locked by the current thread. \end{description}
\end{Desc}



\subsubsection{Function Documentation}
\hypertarget{group__file__api_gacadb911c98d75248cbcf4fbe5a3237a}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-test@{pmath\_\-file\_\-test}}
\index{pmath\_\-file\_\-test@{pmath\_\-file\_\-test}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-test}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-bool\_\-t} pmath\_\-file\_\-test ({\bf pmath\_\-t} {\em file}, \/  int {\em properties})}\hfill}
\label{group__file__api_gacadb911c98d75248cbcf4fbe5a3237a}


Check whether a file supports a set of properties. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} file object. It wont be freed. \item[{\em properties}]File properties. See remarks section. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE iff the file supports all of the requested properties.\end{Desc}
\begin{Desc}
\item[Remarks:]{\em properties\/} can be zero or more of the following values: \begin{itemize}
\item {\tt PMATH\_\-FILE\_\-PROP\_\-READ:} The file is readable.

\item {\tt PMATH\_\-FILE\_\-PROP\_\-WRITE:} The file is writeable.

\item {\tt PMATH\_\-FILE\_\-PROP\_\-BINARY:} It is a binary file.

\item {\tt PMATH\_\-FILE\_\-PROP\_\-TEXT:} It is a text file. \end{itemize}
\end{Desc}
Lists of writeable files are writeable, too. Only Symbols can be readable files. \hypertarget{group__file__api_gc3e849245672e6b61ee1a447218d5ea5}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-status@{pmath\_\-file\_\-status}}
\index{pmath\_\-file\_\-status@{pmath\_\-file\_\-status}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-files\_\-status\_\-t} pmath\_\-file\_\-status ({\bf pmath\_\-t} {\em file})}\hfill}
\label{group__file__api_gc3e849245672e6b61ee1a447218d5ea5}


Get the current status of a readable file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} readable file object. It wont be freed. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]pmath\_\-files\_\-status\_\-t The current file status. \end{Desc}
\hypertarget{group__file__api_g045e5eeb1b78c481c5479fc52ba3a402}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-read@{pmath\_\-file\_\-read}}
\index{pmath\_\-file\_\-read@{pmath\_\-file\_\-read}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-read}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API size\_\-t pmath\_\-file\_\-read ({\bf pmath\_\-t} {\em file}, \/  void $\ast$ {\em buffer}, \/  size\_\-t {\em buffer\_\-size}, \/  {\bf pmath\_\-bool\_\-t} {\em preserve\_\-internal\_\-buffer})}\hfill}
\label{group__file__api_g045e5eeb1b78c481c5479fc52ba3a402}


Read some bytes from a binary file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} readable binary file object. It wont be freed. \item[{\em buffer}]The read bytes will go here. \item[{\em buffer\_\-size}]The number of bytes you would like to read/size of {\em buffer\/}. \item[{\em preserve\_\-internal\_\-buffer}]If TRUE, a subsequent call will get the same buffer content. If FALSE, the file pointer will be moved. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Number of read bytes. This is never more than {\em buffer\_\-size\/}. If {\em preserve\_\-internal\_\-buffer\/} is TRUE or in case of an error, this can be less than {\em buffer\_\-size\/}. \end{Desc}
\hypertarget{group__file__api_gfe0826b3bb3e06907074976c57a67dbf}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-readline@{pmath\_\-file\_\-readline}}
\index{pmath\_\-file\_\-readline@{pmath\_\-file\_\-readline}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-readline}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-string\_\-t} pmath\_\-file\_\-readline ({\bf pmath\_\-t} {\em file})}\hfill}
\label{group__file__api_gfe0826b3bb3e06907074976c57a67dbf}


Read one line from a text file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} readable text file object. It wont be freed. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The next line in the file. \end{Desc}
\hypertarget{group__file__api_g84c177ddfd1eeaa2b8b5fd5aafbf16a1}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-set\_\-textbuffer@{pmath\_\-file\_\-set\_\-textbuffer}}
\index{pmath\_\-file\_\-set\_\-textbuffer@{pmath\_\-file\_\-set\_\-textbuffer}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-set\_\-textbuffer}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-file\_\-set\_\-textbuffer ({\bf pmath\_\-t} {\em file}, \/  {\bf pmath\_\-string\_\-t} {\em buffer})}\hfill}
\label{group__file__api_g84c177ddfd1eeaa2b8b5fd5aafbf16a1}


Set a file's text buffer. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} readable text file. It wont be freed. \item[{\em buffer}]\hyperlink{class_a}{A} string. It should not contain any new line characters. \end{description}
\end{Desc}
\hypertarget{group__file__api_g085f074227d8d7ed82c0fba82fa43109}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-write@{pmath\_\-file\_\-write}}
\index{pmath\_\-file\_\-write@{pmath\_\-file\_\-write}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-write}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API size\_\-t pmath\_\-file\_\-write ({\bf pmath\_\-t} {\em file}, \/  const void $\ast$ {\em buffer}, \/  size\_\-t {\em buffer\_\-size})}\hfill}
\label{group__file__api_g085f074227d8d7ed82c0fba82fa43109}


Write some bytes to a binary file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} writeable binary file object. It wont be freed. \item[{\em buffer}]The data to be written. \item[{\em buffer\_\-size}]The number of bytes to write/size of {\em buffer\/}. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The number of written bytes. This is less than buffer\_\-size in case of an error. If file is a list of files this is the smallest number of written bytes to the single files. \end{Desc}
\hypertarget{group__file__api_g09096caebfcdfeb74c8f3845ff2ff262}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-writetext@{pmath\_\-file\_\-writetext}}
\index{pmath\_\-file\_\-writetext@{pmath\_\-file\_\-writetext}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-writetext}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-bool\_\-t} pmath\_\-file\_\-writetext ({\bf pmath\_\-t} {\em file}, \/  const uint16\_\-t $\ast$ {\em str}, \/  int {\em len})}\hfill}
\label{group__file__api_g09096caebfcdfeb74c8f3845ff2ff262}


Write to a text file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} writeable text file object. It wont be freed. \item[{\em str}]\hyperlink{class_a}{A} UTF-16 string buffer. e.g. pmath\_\-string\_\-buffer(some\_\-text) \item[{\em len}]The number of uint16\_\-t in the buffer. e.g. pmath\_\-string\_\-length(some\_\-text). This can be -1 if {\em str\/} is zero terminated. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Whether the operation succeeded. \end{Desc}
\hypertarget{group__file__api_g039eb11d9dd85af6699565c6f0f0daa1}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-flush@{pmath\_\-file\_\-flush}}
\index{pmath\_\-file\_\-flush@{pmath\_\-file\_\-flush}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-flush}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-file\_\-flush ({\bf pmath\_\-t} {\em file})}\hfill}
\label{group__file__api_g039eb11d9dd85af6699565c6f0f0daa1}


Flush the output buffer of a writeable file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} writeable binary file object. It wont be freed. \end{description}
\end{Desc}
\hypertarget{group__file__api_gf6b8233107d3fb27e9fdabfacc8595d1}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-write\_\-object@{pmath\_\-file\_\-write\_\-object}}
\index{pmath\_\-file\_\-write\_\-object@{pmath\_\-file\_\-write\_\-object}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-write\_\-object}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-bool\_\-t} pmath\_\-file\_\-write\_\-object ({\bf pmath\_\-t} {\em file}, \/  {\bf pmath\_\-t} {\em obj}, \/  {\bf pmath\_\-write\_\-options\_\-t} {\em options})}\hfill}
\label{group__file__api_gf6b8233107d3fb27e9fdabfacc8595d1}


Write an object to a text file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} writeable text file object. It wont be freed. \item[{\em obj}]An object. It wont be freed. \item[{\em options}]Some options defining the format. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Whether the operation succeeded. \end{Desc}
\hypertarget{group__file__api_g7f852f3c8057a535541fbf64f75940d2}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-set\_\-binbuffer@{pmath\_\-file\_\-set\_\-binbuffer}}
\index{pmath\_\-file\_\-set\_\-binbuffer@{pmath\_\-file\_\-set\_\-binbuffer}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-set\_\-binbuffer}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-bool\_\-t} pmath\_\-file\_\-set\_\-binbuffer ({\bf pmath\_\-t} {\em file}, \/  size\_\-t {\em size})}\hfill}
\label{group__file__api_g7f852f3c8057a535541fbf64f75940d2}


Set a binary file's buffer size. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} binary file. It wont be freed. \item[{\em size}]The new size of the buffer in bytes. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]TRUE if the operation succeded.\end{Desc}
This function might clear the old buffer. So it should be called before any file read operation is done. \hypertarget{group__file__api_ga286dc02f8ee28ee0b3fcfa302ae7982}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-manipulate@{pmath\_\-file\_\-manipulate}}
\index{pmath\_\-file\_\-manipulate@{pmath\_\-file\_\-manipulate}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-manipulate}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-file\_\-manipulate ({\bf pmath\_\-t} {\em file}, \/  void($\ast$)(void $\ast$) {\em type}, \/  void($\ast$)(void $\ast$, void $\ast$) {\em callback}, \/  void $\ast$ {\em data})}\hfill}
\label{group__file__api_ga286dc02f8ee28ee0b3fcfa302ae7982}


Manipulate a file's internal representation. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} file object. It wont be freed. \item[{\em type}]The {\em extra\_\-destructor\/} that was provided to \hyperlink{group__file__api_g121e1c31d32fa30b60c8bb4d0808f4eb}{pmath\_\-file\_\-create\_\-binary()} or \hyperlink{group__file__api_gb8a4394b083543a3e572862d567b4b63}{pmath\_\-file\_\-create\_\-text()}. \item[{\em callback}]\hyperlink{class_a}{A} callback function. The first argument will be the {\em extra\/} parameter that was provided to \hyperlink{group__file__api_g121e1c31d32fa30b60c8bb4d0808f4eb}{pmath\_\-file\_\-create\_\-binary()} or \hyperlink{group__file__api_gb8a4394b083543a3e572862d567b4b63}{pmath\_\-file\_\-create\_\-text()}. \item[{\em data}]The second parameter for {\em callback\/}.\end{description}
\end{Desc}
If {\em file\/} is a valid file object and if {\em type\/} is the {\em extra\_\-destructor\/} which {\em file\/} was created with, then and only then {\em callback\/} will be called.

This function does not support lists of writeable files. \hypertarget{group__file__api_g61142920bd7a8f066af908092c84d8e4}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-close@{pmath\_\-file\_\-close}}
\index{pmath\_\-file\_\-close@{pmath\_\-file\_\-close}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-bool\_\-t} pmath\_\-file\_\-close ({\bf pmath\_\-t} {\em file})}\hfill}
\label{group__file__api_g61142920bd7a8f066af908092c84d8e4}


Closes a file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em file}]\hyperlink{class_a}{A} file object. It will be freed. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]Whether file was a valid file object. \end{Desc}
\hypertarget{group__file__api_g121e1c31d32fa30b60c8bb4d0808f4eb}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-create\_\-binary@{pmath\_\-file\_\-create\_\-binary}}
\index{pmath\_\-file\_\-create\_\-binary@{pmath\_\-file\_\-create\_\-binary}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-create\_\-binary}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-symbol\_\-t} pmath\_\-file\_\-create\_\-binary (void $\ast$ {\em extra}, \/  void($\ast$)(void $\ast$) {\em extra\_\-destructor}, \/  {\bf pmath\_\-binary\_\-file\_\-api\_\-t} $\ast$ {\em api})}\hfill}
\label{group__file__api_g121e1c31d32fa30b60c8bb4d0808f4eb}


Create a binary file object. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em extra}]Arbitrary extra data. \item[{\em extra\_\-destructor}]\hyperlink{class_a}{A} function to destroy the extra data. \item[{\em api}]The file access functions. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]\hyperlink{class_a}{A} newly created binary file object. You can destroy and close it with \hyperlink{group__file__api_g61142920bd7a8f066af908092c84d8e4}{pmath\_\-file\_\-close()} or \hyperlink{classpmath__t_54e905402c38940687033b87eb8c6c9f}{pmath\_\-unref()}.\end{Desc}
The {\em api\/} functions are never called by more than one thread at once. This is assured with a non-reentrant spinlock.

\begin{Desc}
\item[See also:]\hyperlink{structpmath__binary__file__api__t}{pmath\_\-binary\_\-file\_\-api\_\-t} \end{Desc}
\hypertarget{group__file__api_gb8a4394b083543a3e572862d567b4b63}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-create\_\-text@{pmath\_\-file\_\-create\_\-text}}
\index{pmath\_\-file\_\-create\_\-text@{pmath\_\-file\_\-create\_\-text}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-create\_\-text}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-symbol\_\-t} pmath\_\-file\_\-create\_\-text (void $\ast$ {\em extra}, \/  void($\ast$)(void $\ast$) {\em extra\_\-destructor}, \/  {\bf pmath\_\-text\_\-file\_\-api\_\-t} $\ast$ {\em api})}\hfill}
\label{group__file__api_gb8a4394b083543a3e572862d567b4b63}


Create a text file object. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em extra}]Arbitrary extra data. \item[{\em extra\_\-destructor}]\hyperlink{class_a}{A} function to destroy the extra data. \item[{\em api}]The file access functions. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]\hyperlink{class_a}{A} newly created text file object. You can destroy and close it with \hyperlink{group__file__api_g61142920bd7a8f066af908092c84d8e4}{pmath\_\-file\_\-close()} or \hyperlink{classpmath__t_54e905402c38940687033b87eb8c6c9f}{pmath\_\-unref()}.\end{Desc}
The {\em api\/} functions are never called by more than one thread at once. This is assured with a non-reentrant spinlock.

\begin{Desc}
\item[See also:]\hyperlink{structpmath__text__file__api__t}{pmath\_\-text\_\-file\_\-api\_\-t} \end{Desc}
\hypertarget{group__file__api_gc6f1960c7c529c1dac9feb97cf795a1c}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-create\_\-text\_\-from\_\-binary@{pmath\_\-file\_\-create\_\-text\_\-from\_\-binary}}
\index{pmath\_\-file\_\-create\_\-text\_\-from\_\-binary@{pmath\_\-file\_\-create\_\-text\_\-from\_\-binary}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-create\_\-text\_\-from\_\-binary}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-symbol\_\-t} pmath\_\-file\_\-create\_\-text\_\-from\_\-binary ({\bf pmath\_\-t} {\em binfile}, \/  const char $\ast$ {\em encoding})}\hfill}
\label{group__file__api_gc6f1960c7c529c1dac9feb97cf795a1c}


Create a text file object operating on a binary file. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em binfile}]\hyperlink{class_a}{A} binary file. It will be freed. \item[{\em encoding}]\hyperlink{class_a}{A} text encoding that the iconv library knows. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]\hyperlink{class_a}{A} newly created text file object. You can destroy and close it with \hyperlink{group__file__api_g61142920bd7a8f066af908092c84d8e4}{pmath\_\-file\_\-close()} or \hyperlink{classpmath__t_54e905402c38940687033b87eb8c6c9f}{pmath\_\-unref()}. \end{Desc}
\hypertarget{group__file__api_g811d829fe964ebbe554c645a0f0f519d}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-create\_\-binary\_\-buffer@{pmath\_\-file\_\-create\_\-binary\_\-buffer}}
\index{pmath\_\-file\_\-create\_\-binary\_\-buffer@{pmath\_\-file\_\-create\_\-binary\_\-buffer}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-create\_\-binary\_\-buffer}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-symbol\_\-t} pmath\_\-file\_\-create\_\-binary\_\-buffer (size\_\-t {\em mincapacity})}\hfill}
\label{group__file__api_g811d829fe964ebbe554c645a0f0f519d}


Create a byte-stream file object. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em mincapacity}]The initial size of the buffer. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]\hyperlink{class_a}{A} newly created binary file object. You can destroy and close it with \hyperlink{group__file__api_g61142920bd7a8f066af908092c84d8e4}{pmath\_\-file\_\-close()} or \hyperlink{classpmath__t_54e905402c38940687033b87eb8c6c9f}{pmath\_\-unref()}.\end{Desc}
You can write to a byte-buffer and read previously written data from it. Note that this does not support random access to the data. \hypertarget{group__file__api_gaa064ada946d36bf41ed9908d8176360}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-binary\_\-buffer\_\-size@{pmath\_\-file\_\-binary\_\-buffer\_\-size}}
\index{pmath\_\-file\_\-binary\_\-buffer\_\-size@{pmath\_\-file\_\-binary\_\-buffer\_\-size}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-binary\_\-buffer\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API size\_\-t pmath\_\-file\_\-binary\_\-buffer\_\-size ({\bf pmath\_\-t} {\em binfile})}\hfill}
\label{group__file__api_gaa064ada946d36bf41ed9908d8176360}


Get The number of readable bytes in a binary buffer. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em binfile}]\hyperlink{class_a}{A} binary file created with \hyperlink{group__file__api_g811d829fe964ebbe554c645a0f0f519d}{pmath\_\-file\_\-create\_\-binary\_\-buffer()}. It wont be freed. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The number of readable bytes in the binary buffer or 0 on error. \end{Desc}
\hypertarget{group__file__api_g9c684b801f150b0485c850cf3649cb16}{
\index{file\_\-api@{file\_\-api}!pmath\_\-file\_\-binary\_\-buffer\_\-manipulate@{pmath\_\-file\_\-binary\_\-buffer\_\-manipulate}}
\index{pmath\_\-file\_\-binary\_\-buffer\_\-manipulate@{pmath\_\-file\_\-binary\_\-buffer\_\-manipulate}!file_api@{file\_\-api}}
\paragraph[{pmath\_\-file\_\-binary\_\-buffer\_\-manipulate}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-file\_\-binary\_\-buffer\_\-manipulate ({\bf pmath\_\-t} {\em binfile}, \/  void($\ast$)(uint8\_\-t $\ast$readable, uint8\_\-t $\ast$writable, const uint8\_\-t $\ast$end, void $\ast$closure) {\em callback}, \/  void $\ast$ {\em closure})}\hfill}
\label{group__file__api_g9c684b801f150b0485c850cf3649cb16}


Manipulate the content of a binary buffer. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em binfile}]\hyperlink{class_a}{A} binary file created with \hyperlink{group__file__api_g811d829fe964ebbe554c645a0f0f519d}{pmath\_\-file\_\-create\_\-binary\_\-buffer()}. It wont be freed. \item[{\em callback}]The callback function that does the manipulation. \item[{\em closure}]The fourth parameter for {\em callback\/}.\end{description}
\end{Desc}
The {\em callback\/} function must not write before {\em readable\/} or after {\em end\/}. {\em writable\/} gives the current write-position, which is always between {\em readable\/} and {\em end\/}. 