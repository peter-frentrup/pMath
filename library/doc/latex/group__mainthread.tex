\hypertarget{group__mainthread}{
\subsection{The Main Thread}
\label{group__mainthread}\index{The Main Thread@{The Main Thread}}
}
\subsubsection*{Functions}
\begin{CompactItemize}
\item 
PMATH\_\-API \hyperlink{classpmath__object__t}{pmath\_\-object\_\-t} \hyperlink{group__mainthread_gff368341b3f162100031fffb986bcb48}{pmath\_\-main\_\-interrupt\_\-wait} (\hyperlink{classpmath__object__t}{pmath\_\-object\_\-t} object)
\begin{CompactList}\small\item\em Evaluate something in the main thread and return the result. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__mainthread_g3514921bc9c7fcf88513abe999689d8b}{pmath\_\-main\_\-interrupt} (\hyperlink{classpmath__object__t}{pmath\_\-object\_\-t} object)
\begin{CompactList}\small\item\em Evaluate something in the main thread but do not wait for the result. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__mainthread_g0252e2ab998fdee2fd3e5a8a96b3ef77}{pmath\_\-main\_\-takeover} (void)
\begin{CompactList}\small\item\em Change the main thread. \item\end{CompactList}\item 
PMATH\_\-API \hyperlink{group__general__types_g8e45b3972d0a6a89b2b45eb9eae6d8f7}{pmath\_\-boolean\_\-t} \hyperlink{group__mainthread_g92ca1b4bc94f99370d5397d6db61a729}{pmath\_\-main\_\-is\_\-current} (void)
\begin{CompactList}\small\item\em Test if the current thread is the main thread. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__mainthread_gbf65d599bb8f32c96d0a0d6ff14bf858}{pmath\_\-main\_\-sleep} (void)
\begin{CompactList}\small\item\em Suspend the current (main) thread until an interrupt occurs. \item\end{CompactList}\item 
PMATH\_\-API void \hyperlink{group__mainthread_g55431179eb0026a983b3177fba6870b6}{pmath\_\-main\_\-wakeup} (void)
\begin{CompactList}\small\item\em Wake up the main thread. \item\end{CompactList}\end{CompactItemize}


\subsubsection{Detailed Description}
One of the threads on which pMath runs is called the main thread (by default, the thread, thatd called pmath\_\-init first). This main thread can be interrupted during evaluation by any other thread to evaluate something else.

The main thread should survive all other threads. However, if the main thread terminates and another thread calls pmath\_\-main\_\-interrupt\mbox{[}\_\-wait\mbox{]}() the interrupt will simply be discarded. 

\subsubsection{Function Documentation}
\hypertarget{group__mainthread_gff368341b3f162100031fffb986bcb48}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-interrupt\_\-wait@{pmath\_\-main\_\-interrupt\_\-wait}}
\index{pmath\_\-main\_\-interrupt\_\-wait@{pmath\_\-main\_\-interrupt\_\-wait}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-interrupt\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-object\_\-t} pmath\_\-main\_\-interrupt\_\-wait ({\bf pmath\_\-object\_\-t} {\em object})}\hfill}
\label{group__mainthread_gff368341b3f162100031fffb986bcb48}


Evaluate something in the main thread and return the result. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em object}]A pMath object. It will be freed. \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]The result of the evaluation or PMATH\_\-UNDEFINED on error. \end{Desc}
\hypertarget{group__mainthread_g3514921bc9c7fcf88513abe999689d8b}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-interrupt@{pmath\_\-main\_\-interrupt}}
\index{pmath\_\-main\_\-interrupt@{pmath\_\-main\_\-interrupt}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-interrupt}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-main\_\-interrupt ({\bf pmath\_\-object\_\-t} {\em object})}\hfill}
\label{group__mainthread_g3514921bc9c7fcf88513abe999689d8b}


Evaluate something in the main thread but do not wait for the result. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em object}]A pMath object. It will be freed.\end{description}
\end{Desc}
If the calling thread is the main thread, pmath\_\-unref(pmath\_\-evaluate(object)) is called. Otherwise, the function return immediately after enqueueing {\em object\/} for evalution in the main thread. \hypertarget{group__mainthread_g0252e2ab998fdee2fd3e5a8a96b3ef77}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-takeover@{pmath\_\-main\_\-takeover}}
\index{pmath\_\-main\_\-takeover@{pmath\_\-main\_\-takeover}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-takeover}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-main\_\-takeover (void)}\hfill}
\label{group__mainthread_g0252e2ab998fdee2fd3e5a8a96b3ef77}


Change the main thread. 

Make the current thread the main thread. \hypertarget{group__mainthread_g92ca1b4bc94f99370d5397d6db61a729}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-is\_\-current@{pmath\_\-main\_\-is\_\-current}}
\index{pmath\_\-main\_\-is\_\-current@{pmath\_\-main\_\-is\_\-current}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-is\_\-current}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API {\bf pmath\_\-boolean\_\-t} pmath\_\-main\_\-is\_\-current (void)}\hfill}
\label{group__mainthread_g92ca1b4bc94f99370d5397d6db61a729}


Test if the current thread is the main thread. 

\begin{Desc}
\item[Returns:]Whether the current thread is the main thread. \end{Desc}
\hypertarget{group__mainthread_gbf65d599bb8f32c96d0a0d6ff14bf858}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-sleep@{pmath\_\-main\_\-sleep}}
\index{pmath\_\-main\_\-sleep@{pmath\_\-main\_\-sleep}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-sleep}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-main\_\-sleep (void)}\hfill}
\label{group__mainthread_gbf65d599bb8f32c96d0a0d6ff14bf858}


Suspend the current (main) thread until an interrupt occurs. 

If the current thread is not the main thread, this function returns immediately. Otherwise it does not return until \hyperlink{group__mainthread_g55431179eb0026a983b3177fba6870b6}{pmath\_\-main\_\-wakeup()} is called directly or indirecly by e.g. \hyperlink{group__mainthread_g3514921bc9c7fcf88513abe999689d8b}{pmath\_\-main\_\-interrupt()}. Finally, \hyperlink{group__threads_g7d0caef45c80f8cdf5bddb124614d13e}{pmath\_\-aborting()} is called to handle all pending interrupts. \hypertarget{group__mainthread_g55431179eb0026a983b3177fba6870b6}{
\index{mainthread@{mainthread}!pmath\_\-main\_\-wakeup@{pmath\_\-main\_\-wakeup}}
\index{pmath\_\-main\_\-wakeup@{pmath\_\-main\_\-wakeup}!mainthread@{mainthread}}
\paragraph[{pmath\_\-main\_\-wakeup}]{\setlength{\rightskip}{0pt plus 5cm}PMATH\_\-API void pmath\_\-main\_\-wakeup (void)}\hfill}
\label{group__mainthread_g55431179eb0026a983b3177fba6870b6}


Wake up the main thread. 

This makes the main thread return from \hyperlink{group__mainthread_gbf65d599bb8f32c96d0a0d6ff14bf858}{pmath\_\-main\_\-sleep()} if it is there. 